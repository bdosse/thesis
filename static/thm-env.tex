\usepackage{tikz, tikz-cd}
\usepackage{thmtools}
\usepackage[framemethod=TikZ]{mdframed}
\mdfsetup{skipabove=1em,
  skipbelow=0em,
  innertopmargin=5pt,
  innerbottommargin=5pt
}

\theoremstyle{definition}
\makeatletter

\declaretheoremstyle[
  headfont=\normalfont\bfseries\scshape,
  bodyfont=\normalfont\itshape,
  qed=$\blacksquare$,
  mdframed={ nobreak }]{unprovedthmboxed}

\declaretheoremstyle[
  headfont=\normalfont\bfseries\scshape,
  bodyfont=\normalfont\itshape,
  qed=$\blacksquare$]{unprovedthm}
  
\declaretheoremstyle[
  headfont=\normalfont\bfseries\scshape,
bodyfont=\normalfont\itshape,
mdframed={ nobreak }
]{thmboxed}

\declaretheoremstyle[
  headfont=\normalfont\bfseries\scshape,
bodyfont=\normalfont\itshape,
%mdframed={ nobreak }
]{thmunboxed}

\declaretheoremstyle[
  headfont=\normalfont\bfseries\scshape,
  mdframed={ nobreak }]{defboxed}

\declaretheoremstyle[
    headfont=\bfseries\sffamily\color{RawSienna!70!black}, bodyfont=\normalfont,
    mdframed={
        linewidth=2pt,
        rightline=false, topline=false, bottomline=false,
        linecolor=RawSienna, backgroundcolor=RawSienna!5,
    }
]{alertbox}

\declaretheoremstyle[
    headfont=\bfseries\sffamily\color{RoyalBlue!70!black}, bodyfont=\normalfont,
    mdframed={
        linewidth=2pt,
        rightline=false, topline=false, bottomline=false,
        linecolor=RoyalBlue, backgroundcolor=RoyalBlue!5,
    }
]{neutralbox}

\declaretheoremstyle[
    headfont=\bfseries\sffamily\color{OliveGreen!70!black}, bodyfont=\normalfont,
    mdframed={
        linewidth=2pt,
        rightline=false, topline=false, bottomline=false,
        linecolor=OliveGreen, backgroundcolor=OliveGreen!5,
    }
]{greenbox}

\declaretheoremstyle[
    headfont=\bfseries\sffamily\color{BurntOrange!70!black}, bodyfont=\normalfont,
    mdframed={
        linewidth=2pt,
        rightline=false, topline=false, bottomline=false,
        linecolor=BurntOrange, backgroundcolor=BurntOrange!5,
    }
]{questionbox}

\declaretheoremstyle[
    headfont=\bfseries\sffamily\color{Fuchsia!70!black}, bodyfont=\normalfont,
    mdframed={
        linewidth=2pt,
        rightline=false, topline=false, bottomline=false,
        linecolor=Fuchsia, backgroundcolor=Fuchsia!5,
    }
]{presentationbox}

\declaretheoremstyle[
  headfont=\normalfont\bfseries\scshape
]{defunboxed}

\declaretheoremstyle[
  headfont=\normalfont\bfseries,
  bodyfont=\normalfont,
  numbered=no,
  qed=$\blacksquare$]{proofline}

\declaretheorem[
  numberwithin=section,
  style=defunboxed,
  name=Définition,
  Refname={Définition,Définitions}
]{definition}

\declaretheorem[
  sibling=definition,
  style=thmunboxed,
  name=Lemme,
  Refname={Lemme,Lemmes}
]{lemme}

\declaretheorem[
  sibling=definition,
  style=thmunboxed,
  name=Proposition,
  Refname={Proposition,Propositions}
]{proposition}

\declaretheorem[
  sibling=definition,
  style=thmunboxed,
  name=Théorème,
  Refname={Théorème,Théorèmes}
]{theoreme}

\declaretheorem[
  sibling=definition,
  style=thmunboxed,
  name=Corollaire,
  Refname={Corollaire,Corollaires}
]{corollaire}

\declaretheorem[
  sibling=definition,
  style=unprovedthm,
  name=Lemme,
  Refname={Lemme,Lemmes}
]{ulemme}

\declaretheorem[
  sibling=definition,
  style=unprovedthm,
  name=Proposition,
  Refname={Proposition,Propositions}
]{uproposition}

\declaretheorem[
  sibling=definition,
  style=unprovedthm,
  name=Théorème,
  Refname={Théorème,Théorèmes}
]{utheoreme}

\declaretheorem[
  sibling=definition,
  style=unprovedthm,
  name=Corollaire,
  Refname={Corollaire,Corollaires}
]{ucorollaire}

\declaretheorem[
  numbered=no,
  style=alertbox,
  name=Attention,
  Refname={Attention,Attentions}
]{alert}

\declaretheorem[
  numbered=no,
  style=neutralbox,
  name=Prérequis,
  Refname={Prérequis,Prérequis}
]{prerequis}

\declaretheorem[
  numbered=no,
  style=questionbox,
  name=Question,
  Refname={Question,Questions}
]{question}

\declaretheorem[
  numbered=no,
  style=greenbox,
  name=Piste,
  Refname={Piste,Pistes}
]{piste}

\declaretheorem[
  numbered=no,
  style=presentationbox,
  name=Présentation,
  Refname={Présentation,Présentations}
]{presentation}

\declaretheorem[
  sibling=definition,
  style=defunboxed,
  name=Remarque,
  Refname={Remarque,Remarques}
]{remarque}

\declaretheorem[
  numbered=no,
  style=defunboxed,
  name=Exemple,
  Refname={Exemple,Exemples}
]{exemple}

\declaretheorem[
  numbered=no,
  style=defunboxed,
  name=Notation,
  Refname={Notation,Notations}
]{note}

\declaretheorem[
  numbered=no,
  style=proofline,
  name=Démonstration]{replacementproof}

\renewenvironment{proof}[1][\proofname]
{\begin{replacementproof}}
{\end{replacementproof}}

%\newtheorem{exo}{Exercice}[section]
%\theoremstyle{plain}
%\newtheorem{lm}[mdef]{Lemme}
%\newtheorem{pro}[mdef]{Proposition}
%\newtheorem{cor}[mdef]{Corollaire}
%\newtheorem{thm}[mdef]{Théorème}

\makeatother